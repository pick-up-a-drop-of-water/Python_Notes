# Contents
- [è¾“å…¥](#è¾“å…¥ "ç‚¹å‡»è·³è½¬")
- [è¾“å‡º](#è¾“å‡º "ç‚¹å‡»è·³è½¬")
- [çˆ¬è™«](#çˆ¬è™« "ç‚¹å‡»è·³è½¬")
- [æ˜“é”™ç‚¹](#æ˜“é”™ç‚¹ "ç‚¹å‡»è·³è½¬")
## è¾“å…¥
> - 
- [è¿”å›ç›®å½•](#Contents "ç‚¹å‡»è·³è½¬")
## è¾“å‡º
> - 
- [è¿”å›ç›®å½•](#Contents "ç‚¹å‡»è·³è½¬")
## çˆ¬è™«
> - [é‡‡é›†æµ·é‡IPï¼Œæ„é€ ä»£ç†IPæ± ](https://github.com/pick-up-a-drop-of-water/Python_Notes/blob/master/%E7%88%AC%E8%99%AB/%E9%87%87%E9%9B%86%E6%B5%B7%E9%87%8FIP%E5%B9%B6%E7%AD%9B%E9%80%89%E6%9C%89%E7%94%A8%E7%9A%84%E4%BB%A3%E7%90%86/README.md "ç‚¹å‡»è·³è½¬")
> - [é‡‡é›†åšå®¢+åˆ¶ä½œpdf](https://github.com/pick-up-a-drop-of-water/Python_Notes/tree/master/%E7%88%AC%E8%99%AB/%E9%87%87%E9%9B%86%E5%8D%9A%E5%AE%A2+%E5%88%B6%E4%BD%9Cpdf "æ›´æ–°ing")
> - [çˆ¬å–å¤©æ°”ä¿¡æ¯+twilioçŸ­ä¿¡æ¨é€](https://github.com/pick-up-a-drop-of-water/Python_Notes/tree/master/%E7%88%AC%E8%99%AB/%E7%88%AC%E5%8F%96%E5%A4%A9%E6%B0%94%E4%BF%A1%E6%81%AF+twilio%E7%9F%AD%E4%BF%A1%E6%8E%A8%E9%80%81 "ç‚¹å‡»è·³è½¬")
> - [ä¸ªæ€§ç­¾åè®¾è®¡](https://github.com/pick-up-a-drop-of-water/Python_Notes/tree/master/%E7%88%AC%E8%99%AB/%E4%B8%AA%E6%80%A7%E7%AD%BE%E5%90%8D "ç‚¹å‡»æŸ¥çœ‹æºä»£ç "): ç¨‹åºå·²æ‰“åŒ…ä¸ºexeæ–‡ä»¶ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥[ä¸‹è½½æŸ¥çœ‹](https://pan.baidu.com/s/1ijvF9qtoR9mtHtE3cZA-kA "æå–ç : tpkd")
> - [å…åˆ¸ä¸‹è½½ç™¾åº¦æ–‡åº“txtæ–‡ä»¶](https://github.com/pick-up-a-drop-of-water/Python_Notes/blob/master/%E7%88%AC%E8%99%AB/%E5%85%8D%E5%88%B8%E4%B8%8B%E8%BD%BD%E7%99%BE%E5%BA%A6%E6%96%87%E5%BA%93txt%E6%95%B0%E6%8D%AE/README.md "ç‚¹å‡»è·³è½¬")
> - [å…åˆ¸ä¸‹è½½ç™¾åº¦æ–‡åº“docæ–‡ä»¶](https://github.com/pick-up-a-drop-of-water/Python_Notes/tree/master/%E7%88%AC%E8%99%AB/%E5%85%8D%E5%88%B8%E4%B8%8B%E8%BD%BD%E7%99%BE%E5%BA%A6%E6%96%87%E5%BA%93doc%E6%96%87%E4%BB%B6 "ç‚¹å‡»è·³è½¬")

- [è¿”å›ç›®å½•](#Contents "ç‚¹å‡»è·³è½¬")
## æ˜“é”™ç‚¹
> - çˆ¬å–ç½‘é¡µï¼Œä¿å­˜htmlæ–‡ä»¶æ—¶ï¼Œåº”è¯¥ä»¥utf-16æ ¼å¼ä¿å­˜ï¼Œå¯é¿å…å‡ºç°htmlä¸­çš„ä¸­æ–‡åŠç‰¹æ®Šå­—ç¬¦å‡ºç°ä¹±ç 
- [è¿”å›ç›®å½•](#Contents "ç‚¹å‡»è·³è½¬")
## Links shared :airplane:
> - [Python æ•™ç¨‹é˜…è¯»ç®€è®°](https://chyroc.cn/posts/python-tutorial-notes/)
> - [Python è¯­æ³•ä¹‹è£…é¥°å™¨decorator](https://www.cnblogs.com/yutongzhu/p/5615764.html)
## Python Notes :book:
> - Record some magic commands or review codes!
## Install tensorflow with conda in windows :smile:
```shell
conda create -n mlbook python=3.5 anaconda
conda activate mlbook
conda install --channel https://conda.anaconda.org/conda-forge tensorflow
# optionally install Jupyter extensions
conda install -n mlbook -c conda-forge jupyter_contrib_nbextensions
```
## Ipython :dart:
### magic commands :smirk:
1. %run xxx.py è¿è¡Œpythonæ–‡ä»¶
2. è‹¥.pyä¸åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œåœ¨ipythonç»ˆç«¯å¯ä»¥ä½¿ç”¨ç³»ç»Ÿå‘½ä»¤ï¼Œæ¯”å¦‚cdã€lsç­‰ç­‰ï¼›cd æ—¶ï¼Œå¯ä»¥ç›´æ¥æŠŠæ–‡ä»¶æ‹–åˆ°ç»ˆç«¯çª—å£ï¼Œè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶è·¯å¾„ï¼ˆLinuxï¼‰
3. %paste å¤åˆ¶ç²˜è´´æ¿é‡Œçš„å†…å®¹è‡³ç»ˆç«¯ï¼ˆä»£ç ï¼‰
4. %timeit function(para1, para2, ...) æŸ¥çœ‹æŸå‡½æ•°çš„è¿è¡Œæ—¶é—´ 
5. %pdb on ç›¸å½“äºåœ¨å‘½ä»¤è¡Œä¸­è°ƒè¯•ï¼Œè‹¥ç¨‹åºå‡ºé”™ï¼Œå¯ä»¥æ‰“å°å˜é‡çš„å€¼ã€‚æ¯”å¦‚ p a(æ‰“å°å˜é‡açš„å€¼)ï¼Œp b(æ‰“å°å˜é‡bçš„å€¼)ï¼Œæœ€åqå‘½ä»¤é€€å‡ºã€‚ä¸æƒ³ç”¨è‡ªåŠ¨å¼€è°ƒè¯•ï¼Œåœ¨ipythonç»ˆç«¯è¿è¡Œæ­¤å‘½ä»¤ï¼š%pdb off
6. _(ä¸€ä¸ªä¸‹åˆ’çº¿)è¡¨ç¤ºæ“ä½œï¼ˆå‘½ä»¤ï¼‰çš„ä¸Šä¸€ä¸ªå†å²ï¼Œ__(ä¸¤ä¸ªä¸‹åˆ’çº¿)è¡¨ç¤ºä¸Šä¸¤ä¸ªæ“ä½œçš„å†å²
7. _34å¾—åˆ°ç¬¬34è¡Œè¾“å…¥ä»£ç çš„è¿è¡Œç»“æœ
8. _i34å¾—åˆ°ç¬¬34è¡Œè¾“å…¥ä»£ç 
9. [Ipythonå¿«æ·é”®](./pictures_stored/Ipythonå¿«æ·é”®.png)
10. [å¸¸ç”¨çš„é­”æœ¯å‘½ä»¤](./pictures_stored/Ipythonå¸¸ç”¨çš„é­”æœ¯å‘½ä»¤.png)

### codes for numpy in Ipython :smile:

```python
'''
æ£€éªŒnumpyçš„é«˜æ•ˆæ€§
'''
def test(a, b):
	sum = 0
	for i,j in zip(a,b):
		sum += i*j
	return sum

import random
import numpy as np

# äº§ç”Ÿéšæœºæ•°
# äº§ç”Ÿ10ä¸ª1-20çš„éšæœºæ•´æ•°
num = [random.randint(1,10) for i in range(20)]
# äº§ç”Ÿ10ä¸ª10.0-20.0çš„éšæœºå°æ•°ä¸”ä¿ç•™ä¸¤ä½æœ‰æ•ˆæ•°å­—
prize = [round(random.uniform(10.0,20.0),2) for i in range(20)]

%timeit test(prize, num)
# output ï¼š1.49 Âµs Â± 33.7 ns per loop (mean Â± std. dev. of 7 runs, 1000000 loops each)

prize_np = np.array(prize)
num_np = np.array(num)
%timeit np.dot(prize_np, num_np)
# output ï¼š762 ns Â± 1.07 ns per loop (mean Â± std. dev. of 7 runs, 1000000 loops each)

np.arange(1,10,0.5) 			#æ­¥é•¿å¯ä»¥è®¾ç½®ä¸ºå°æ•°ï¼Œrange()ä¸å¯ä»¥
np.linspace(0,10,15)			# 0åˆ°10åˆ†æˆ15ä»½

np.zeros(10, dtype='int')		#å…¨é›¶æ•°ç»„
np.zeros((3,5))				#äºŒç»´å…¨é›¶æ•°ç»„(ä¼ å…ƒç»„)
np.zeros((3,5,10))			#ä¸‰ç»´å…¨é›¶æ•°ç»„
np.ones(10)				#å…¨ä¸€æ•°ç»„

np.empty(10)				#ä¸ä¼šæœ‰èµ‹å€¼æ“ä½œ(å› æ­¤æ¯”np.zeros()å¿«)ï¼Œä½†äº§ç”Ÿçš„æ•°å€¼ä¸ä¹‹å‰å†…å­˜å­˜å‚¨å€¼ç›¸å…³ï¼Œäº¦å¯èƒ½æ˜¯éšæœºçš„

a = np.arange(15)
a = a.reshape(3,5)			#å˜ä¸ºäºŒç»´æ•°ç»„
# ç­‰ä»·äº
a = np.arange(15).reshape(3,5)

np.ceil(3.5)	# 4 å‘ä¸Šå–æ•´
np.floor(3.5)	# 3 å‘ä¸‹å–æ•´
np.rint(3.5)	# 4 å››èˆäº”å…¥
np.round(3.5)	# 4 å››èˆäº”å…¥
np.around([0.12394, 1.255823],2)	# ä¿ç•™2ä½å°æ•°, [0.12, 1.26]	

a = np.array([6,0])
b = np.array([2,0])
c = a/b
np.isnan(c)				# æœ‰NaNå€¼çš„ä½ç½®å¯¹åº”ä¸ºTrue
# outputï¼šarray([False,  True])
# åˆ©ç”¨å…¶ç­›é€‰å…ƒç´ 
c[~np.isnan(c)]

# randomæ¨¡å—è‡ªå¸¦çš„éšæœºæ•°ç”Ÿæˆå‡½æ•°
random.random()				# è¿”å›0-1åŒºé—´çš„éšæœºæ•°
random.randint(1,10)			# è¿”å›æŒ‡å®šåŒºé—´1-10çš„éšæœºæ•°
random.uniform(1.0,10.0)		# è¿”å›1.0-10.0åŒºé—´çš„éšæœºæ•°
a = [1,2,3,4,5]
random.shuffle(a)			# æ‰“ä¹±ç»™å®šåˆ—è¡¨çš„é¡ºåº
random.choice(a)			# ä»ç»™å®šåˆ—è¡¨ä¸­éšæœºé€‰ä¸€ä¸ªå€¼

# numpyæ¨¡å—ä¸­çš„éšæœºæ•°ç”Ÿæˆå‡½æ•°ä¸ä¹‹å‰ç±»ä¼¼
np.random.randint(1,10)			# è¿”å›ä¸€ä¸ªæŒ‡å®šåŒºé—´1-10çš„éšæœºæ•°
np.random.randint(1,10,5)		# è¿”å›äº”ä¸ªæŒ‡å®šåŒºé—´1-10çš„éšæœºæ•°
np.random.randint(1,10,(3,5))		# è¿”å›3x5çš„æ•°ç»„ï¼ŒæŒ‡å®šåŒºé—´1-10çš„éšæœºæ•°
```
### codes for pandas :smile:

```python
import pandas as pd
import numpy as np
a = pd.Series(np.arange(20))
'''
ä¿®æ”¹b,ä¼šæ”¹å˜åŸæ¥aä¸­å¯¹åº”çš„å€¼
b = a[10:] 
b[10] = 222
æ­¤æ—¶a[10]å˜ä¸º222
åŒæ ·çš„æ€§è´¨é€‚ç”¨äºnumpyä¸­arrayçš„æ“ä½œ
å› æ­¤ï¼Œèµ‹å€¼éœ€è°¨æ…ï¼
'''
# å–aä¸­ç¬¬åä¸ªä»¥åçš„å…ƒç´ ï¼Œä½¿ç”¨copyåï¼Œä¿®æ”¹bï¼Œä¸ä¼šæ”¹å˜åŸæ¥aä¸­å¯¹åº”çš„å€¼
b = a[10:].copy()
b
'''
Out[10]: 
10    10
11    11
12    12
13    13
14    14
15    15
16    16
17    17
18    18
19    19
dtype: int64
'''
# b[-1],b[0],b[5],b[9]éƒ½ä¼šå‡ºé”™ï¼Œå› ä¸ºæ ‡ç­¾å’Œä¸‹æ ‡ï¼ˆç´¢å¼•ï¼‰å†²çª
# b[10]ä¸ä¼šå‡ºé”™ï¼Œå› ä¸ºæ—¢å¯ä»¥è§£é‡Šä¸ºæ ‡ç­¾ä¹Ÿå¯ä»¥è§£é‡Šä¸ºä¸‹æ ‡ï¼ˆç´¢å¼•ï¼‰
'''
å¦‚æœç´¢å¼•æ˜¯æ•´æ•°ç±»å‹ï¼Œåˆ™æ ¹æ®æ•´æ•°è¿›è¡Œæ•°æ®æ“ä½œæ—¶æ€»æ˜¯é¢å‘æ ‡ç­¾çš„
æ‰€è°“æ ‡ç­¾ï¼Œå³å®šä¹‰Seriesæˆ–Dataframeæ—¶æŒ‡å®šçš„indexï¼Œé»˜è®¤ä»0å¼€å§‹è®¡æ•°
egï¼špd.Series(np.arange(5),index=list('abcde'))
loc			ä»¥æ ‡ç­¾è§£é‡Š
iloc		ä»¥ä¸‹æ ‡è§£é‡Š
'''
# å–å‡ºbä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
b.loc[10]	#ä»¥æ ‡ç­¾è§£é‡Š
b.iloc[0]	#ä»¥ä¸‹æ ‡è§£é‡Š
# Dataframeç´¢å¼•å’Œåˆ‡ç‰‡ï¼Œå’ŒSeriesç±»ä¼¼
df = pd.DataFrame({'one':list('1234'),
                   'two':list('4321')})
'''
Out[65]: 
  one two
0   1   4
1   2   3
2   3   2
3   4   1
'''
# ä¸¤ç§æ–¹å¼å–ç¬¬äºŒåˆ—çš„ç¬¬ä¸€è¡Œå’Œç¬¬ä¸‰è¡Œçš„å…ƒç´ 
df.loc[[0,2],'two']		#åˆ—ä»¥æ ‡ç­¾è§£é‡Š
df.iloc[[0,2],1]		#åˆ—ä»¥ä¸‹æ ‡è§£é‡Š
```
### advancing codes for pandas :dart:
> - ğŸ”—[é«˜æ•ˆä½¿ç”¨pandas](https://realpython.com/fast-flexible-pandas/)

```python
import pandas as pd

'''
# æ—¶é—´å¯¹è±¡å¤„ç†
pd.date_range('2019-01-01', '2019-03-18')
# freq = H(our),W(eek),B(usiness)
pd.date_range('2019-01-01', '2019-03-18', freq='W')
# æ¯å‘¨ä¸€
pd.date_range('2019-01-01', '2019-03-18', freq='W-MON')
# äº§ç”Ÿ100ä¸ªå‘¨
pd.date_range('2019-03-18', periods=100, freq='W')
'''

# parse_datesï¼šå¤„ç†ä¸ºæ—¶é—´å¯¹è±¡
# 'date'ï¼ˆæ—¶é—´å¯¹è±¡ï¼‰ä½œä¸ºç´¢å¼•
df = pd.read_csv('xxx.csv', index_col='date', parse_dates=['date'])

# ç¬¬ä¸€æ­¥ï¼šè®¡ç®—MA

## æ–¹æ¡ˆ1ï¼šæ‰‹åŠ¨è®¡ç®—
df['ma5'] = np.nan		# 5æ—¥å‡å€¼
df['ma10'] = np.nan		# 10æ—¥å‡å€¼

for i in range (4, len(df)):
	df.loc[df.index[i],'ma5'] = df.['close'][i-4:i+1].mean()

for i in range (9, len(df)):
	df.loc[df.index[i],'ma10'] = df.['close'][i-9:i+1].mean()
	
## æ–¹æ¡ˆ2ï¼šcumsum
sr = df['close'].cumsum()
df['ma5'] = (sr - sr.shift(1).fillna(0).shift(4)/5
df['ma10'] = (sr - sr.shift(1).fillna(0).shift(9)/10

## æ–¹æ¡ˆ3ï¼šrolling
df['ma5'] = df['close'].rolling(5).mean()
df['ma10'] = df['close'].rolling(10).mean()

# ç¬¬äºŒæ­¥ï¼šæ‰¾å‡ºé‡‘å‰å’Œæ­»å‰èŠ‚ç‚¹

df = df.dropna()

## æ–¹æ¡ˆ1ï¼šç›´æ¥æœç´¢
golden_cross = []				# ma5 ç”±ä¸‹å¾€ä¸Šç©¿ ma10 
death_cross = []				# ma5 åˆä¸Šå¾€ä¸‹ç©¿ ma10

sr = df['ma10']>=df['ma5']			# è¿”å›Boolå˜é‡çš„dataframe

for i in range(1, len(sr)):
	if sr.iloc[i] == True and sr.iloc[i-1] == False:
		death_cross.append(sr.index[i])
	if sr.iloc[i] == False and sr.iloc[i-1] == True:
		golden_cross.append(sr.index[i])
		
## æ–¹æ¡ˆ2ï¼šshift
death_cross = df[(df['ma10']>=df['ma5'])&(df['ma10']<df.['ma5']).shift(1)].index
golden_cross = df[(df['ma10']<=df['ma5'])&(df['ma10']>df.['ma5']).shift(1)].index

'''
# å…¶ä»–æ“ä½œ
df.groupby('col_name')	
df.groupby('col_name').get_group('foo')	#get rows named 'foo' in group 'colname'
pd.merge(df1, df2)
pd.merge(df1, df2, on='col_name')
'''
```
### å…¶ä»–é‡è¦æ“ä½œ :+1:
01. ### åˆå¹¶æ•°æ®å¸§
```python
# miRNA_disease_data = pd.concat([miRNA_disease_pos_df, miRNA_disease_neg_df])
# or
miRNA_disease_data = miRNA_disease_pos_df.append(miRNA_disease_neg_df)
miRNA_disease_data = miRNA_disease_data.reset_index(drop=True)
```
02. ### æ ¹æ®ç›¸å…³åˆ—çš„å€¼ä»DataFrameä¸­é€‰æ‹©è¡Œ
> [å‚è€ƒé“¾æ¥](https://vimsky.com/article/3842.html)
```python
link2removed = ['D-65::mi-143', 'D-65::mi-144', 'D-65::mi-145', 'D-65::mi-156', 'D-65::mi-160', 'D-65::mi-180']
ix_filtered = disease_miRNA_pos_df['links'].isin(link2removed)
disease_miRNA_specify_pos_df = disease_miRNA_pos_df[ix_filtered].reset_index(drop=True)
disease_miRNA_filtered_pos_df = disease_miRNA_pos_df[~ix_filtered].reset_index(drop=True)
```
### ã€ä¸é”™çš„ä»£ç æ®µã€‘
> 01.[formatç”¨é€”](https://github.com/pick-up-a-drop-of-water/Machine-Learning-Notes/blob/master/ä¸é”™çš„ä»£ç æ®µ.md)

